{% extends "base.html" %}

{% block content %}
<div class="page-header">
    <div class="container">
        <h1>Profile Management</h1>
    </div>
</div>

<div class="container">
    <div class="form-card">
        <form id="profileForm">
            <div class="form-group">
                <label for="full_name">Full Name:</label>
                <input type="text" id="full_name" name="full_name" value="{{ user_data.full_name or '' }}" required>
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" value="{{ user_data.email or '' }}" disabled>
            </div>
            <div class="form-group">
                <label for="phone">Phone:</label>
                <input type="tel" id="phone" name="phone" value="{{ user_data.phone or '' }}">
            </div>
            <div class="form-group">
                <label for="specialization">Specialization:</label>
                <input type="text" id="specialization" name="specialization" value="{{ user_data.specialization or '' }}">
            </div>
            <button type="submit" class="btn btn-primary">Update Profile</button>
        </form>
    </div>
</div>

<script>
document.getElementById('profileForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    const formData = {
        full_name: document.getElementById('full_name').value,
        phone: document.getElementById('phone').value,
        specialization: document.getElementById('specialization').value
    };
    
    try {
        const response = await fetch('/counselor/profile', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(formData)
        });
        
        const data = await response.json();
        if (data.success) {
            alert('Profile updated successfully!');
        } else {
            alert(data.error || 'Failed to update profile');
        }
    } catch (error) {
        alert('An error occurred. Please try again.');
    }
});
</script>
{% endblock %}

